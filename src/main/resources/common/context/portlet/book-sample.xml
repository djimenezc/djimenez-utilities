<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>

<!-- Property Configurer  -->
	<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="locations">
			<list>
				<value>classpath*:/context/portlet/books.properties</value>
			</list>
		</property>
	</bean>

	<!-- Services -->

	<bean id="bookService" class="com.germinus.sample.web.BookService">
		<property name="initBooks" value="${books.initBooks}"/>
	</bean>
	
	<!-- Validators -->

	<bean id="bookValidator" class="com.germinus.sample.web.BookValidator"/>

	<!-- Controllers -->

	<bean id="booksControllerTemplate" abstract="true">
		<property name="bookService"><ref bean="bookService"/></property>
	</bean>

	<bean id="booksController" class="com.germinus.sample.controller.BooksController" parent="booksControllerTemplate"/>

	<bean id="bookIncrementController" class="com.germinus.sample.controller.BookIncrementController" parent="booksControllerTemplate"/>

    <bean id="bookViewController" class="com.germinus.sample.controller.BookViewController" parent="booksControllerTemplate"/>

    <bean id="bookEditController" class="com.germinus.sample.controller.BookEditController" parent="booksControllerTemplate">
		<property name="sessionForm" value="true"/>
		<property name="commandName" value="book"/>
		<property name="commandClass" value="com.germinus.sample.model.Book"/>
		<property name="formView" value="bookEdit"/>
		<property name="validator"><ref bean="bookValidator"/></property> 
    </bean>

    <bean id="bookAddController" class="com.germinus.sample.controller.BookAddController" parent="booksControllerTemplate">
		<property name="sessionForm" value="true"/>
		<property name="commandName" value="book"/>
		<property name="commandClass" value="com.germinus.sample.model.Book"/>
		<property name="pageAttribute" value="page"/>
		<property name="pages" value="bookAdd,bookAdd,bookAdd,bookAdd,bookAdd"/>
		<property name="validator"><ref bean="bookValidator"/></property> 
    </bean>

	<bean id="bookDeleteController" class="com.germinus.sample.controller.BookDeleteController" parent="booksControllerTemplate"/>

	<bean id="booksHelpController" class="org.springframework.web.portlet.mvc.ParameterizableViewController">
		<property name="viewName" value="booksHelp"/>
	</bean>
</beans>